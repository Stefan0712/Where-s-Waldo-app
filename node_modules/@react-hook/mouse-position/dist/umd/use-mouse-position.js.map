{"version":3,"file":"use-mouse-position.js","sources":["../../node_modules/@react-hook/event/src/index.tsx","../../node_modules/@react-hook/throttle/src/index.tsx","../../node_modules/@react-hook/latest/src/index.tsx","../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(target: any, type: any, listener: any, cleanup: any): void {\n  const storedListener = React.useRef(listener)\n  const storedCleanup = React.useRef(cleanup)\n\n  React.useEffect(() => {\n    storedListener.current = listener\n    storedCleanup.current = cleanup\n  })\n\n  React.useEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    let didUnsubscribe = 0\n    function listener(this: any, ...args: any[]) {\n      if (didUnsubscribe) return\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      didUnsubscribe = 1\n      targetEl.removeEventListener(type, listener)\n      cleanup && cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\nconst perf = typeof performance !== 'undefined' ? performance : Date\nconst now = () => perf.now()\n\nexport function useThrottleCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  fps = 30,\n  leading = false\n): (...args: CallbackArguments) => void {\n  const storedCallback = useLatest(callback)\n  const ms = 1000 / fps\n  const prev = React.useRef(0)\n  const trailingTimeout = React.useRef<ReturnType<typeof setTimeout>>()\n  const clearTrailing = () =>\n    trailingTimeout.current && clearTimeout(trailingTimeout.current)\n  const deps = [fps, leading, storedCallback]\n\n  // Reset any time the deps change\n  React.useEffect(\n    () => () => {\n      prev.current = 0\n      clearTrailing()\n    },\n    deps\n  )\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments\n    const rightNow = now()\n    const call = () => {\n      prev.current = rightNow\n      clearTrailing()\n      storedCallback.current.apply(null, args as any)\n    }\n    const current = prev.current\n    // leading\n    if (leading && current === 0) return call()\n    // body\n    if (rightNow - current > ms) {\n      if (current > 0) return call()\n      prev.current = rightNow\n    }\n    // trailing\n    clearTrailing()\n    trailingTimeout.current = setTimeout(() => {\n      call()\n      prev.current = 0\n    }, ms)\n  }, deps)\n}\n\nexport function useThrottle<State>(\n  initialState: State | (() => State),\n  fps?: number,\n  leading?: boolean\n): [State, React.Dispatch<React.SetStateAction<State>>] {\n  const state = React.useState<State>(initialState)\n  return [state[0], useThrottleCallback(state[1], fps, leading)]\n}\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useEvent from '@react-hook/event'\nimport {useThrottleCallback} from '@react-hook/throttle'\n\nfunction useMouse<T extends HTMLElement = HTMLElement>(\n  target: React.RefObject<T> | T | null,\n  options: UseMouseOptions = {}\n): MousePosition {\n  const {fps = 30, enterDelay = 0, leaveDelay = 0} = options\n  const [state, dispatch] = React.useReducer<\n    React.Reducer<UseMouseState, UseMouseAction<T>>\n  >(\n    (state, action): UseMouseState => {\n      const {mouse, context} = state\n      const handleDown = (\n        state: UseMouseState,\n        action:\n          | TouchdownAction<T>\n          | MousedownAction<T>\n          | MousemoveAction<T>\n          | TouchmoveAction<T>\n      ): UseMouseState => {\n        if (typeof window === 'undefined') return state\n        const {event: e, element} = action\n        let event: MouseEvent | TouchEvent['touches'][0]\n        if ('touches' in e) {\n          event = (e as TouchEvent).touches[0]\n        } else {\n          event = e\n        }\n        const {clientX, clientY, screenX, screenY, pageX = 0, pageY = 0} = event\n        const rect = element.getBoundingClientRect()\n        const x = pageX - rect.left - (window.pageXOffset || window.scrollX)\n        const y = pageY - rect.top - (window.pageYOffset || window.scrollY)\n        // shims a mouseleave event for touch devices\n        if (\n          'touches' in e &&\n          (x < 0 || y < 0 || x > rect.width || y > rect.height)\n        ) {\n          return {\n            ...state,\n            context: {\n              ...state.context,\n              hoverStatus: 'leave',\n              touchStatus: 'end',\n            },\n          }\n        }\n\n        return {\n          context: {\n            ...state.context,\n            hoverStatus: 'enter',\n          },\n          mouse: {\n            ...state.mouse,\n            x,\n            y,\n            pageX,\n            pageY,\n            clientX,\n            clientY,\n            screenX,\n            screenY,\n            elementWidth: rect.width,\n            elementHeight: rect.height,\n            isOver: true,\n            isTouch: 'touches' in e,\n          },\n        }\n      }\n\n      if (action.type === 'mousemove') {\n        // Bails out if touch has ended\n        if (context.touchStatus === 'end') return state\n        return handleDown(state, action)\n      } else if (action.type === 'touchmove') {\n        const nextState: UseMouseState = {\n          context: {\n            ...context,\n            touchStatus: 'start',\n          },\n          mouse,\n        }\n\n        return handleDown(nextState, action)\n      } else if (action.type === 'touchdown') {\n        const nextState: UseMouseState = {\n          context: {\n            ...context,\n            touchStatus: 'start',\n          },\n          mouse: {\n            ...mouse,\n            isDown: true,\n          },\n        }\n\n        return handleDown(nextState, action)\n      } else if (action.type === 'mousedown') {\n        return {\n          context,\n          mouse: {\n            ...mouse,\n            isDown: true,\n          },\n        }\n      } else if (action.type === 'mouseup') {\n        return {context, mouse: {...mouse, isDown: false}}\n      } else if (action.type === 'mouseleave') {\n        return {\n          context: {\n            ...context,\n            hoverStatus: 'leave',\n          },\n          mouse: {...mouse, isOver: false},\n        }\n      } else if (action.type === 'touchleave') {\n        return {\n          context: {...context, hoverStatus: 'leave', touchStatus: 'end'},\n          mouse: {...mouse, isOver: false, isDown: false},\n        }\n      } else if (action.type === 'activeStatus') {\n        return {\n          context: {...context, activeStatus: action.value},\n          mouse,\n        }\n      }\n\n      return state\n    },\n    {\n      mouse: initialState,\n      context: initialContext,\n    }\n  )\n\n  const onMove = useThrottleCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const element = target && 'current' in target ? target.current : target\n      if (!element) return\n      dispatch({type: 'mousemove', event, element})\n    },\n    fps,\n    true\n  )\n  const onTouchMove = useThrottleCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const element = target && 'current' in target ? target.current : target\n      if (!element) return\n      dispatch({type: 'touchmove', event, element})\n    },\n    fps,\n    true\n  )\n  const onLeave = useThrottleCallback(\n    () => dispatch({type: 'mouseleave'}),\n    fps,\n    // This has to be false because we always want this callback to fire after any\n    // move events.\n    false\n  )\n  const onDown = useThrottleCallback(\n    (event: MouseEvent | TouchEvent) => {\n      const element = target && 'current' in target ? target.current : target\n      if (!element) return\n      dispatch(\n        'touches' in event\n          ? {\n              type: 'touchdown',\n              element,\n              event: event,\n            }\n          : {\n              type: 'mousedown',\n              element,\n              event: event,\n            }\n      )\n    },\n    fps,\n    true\n  )\n  const onUp = useThrottleCallback(\n    () => dispatch({type: 'mouseup'}),\n    fps,\n    // This has to be false because we always want this callback to fire after any\n    // down events.\n    false\n  )\n  const onTouchEnd = useThrottleCallback(\n    () => dispatch({type: 'touchleave'}),\n    fps,\n    // This has to be false because we always want this callback to fire after any\n    // move events.\n    false\n  )\n\n  useEvent(target, 'mouseenter', onMove)\n  useEvent(target, 'mousemove', onMove)\n  useEvent(target, 'mouseleave', onLeave)\n  useEvent(target, 'mousedown', onDown)\n  useEvent(typeof window !== 'undefined' ? window : null, 'mousedown', onDown)\n  useEvent(typeof window !== 'undefined' ? window : null, 'mouseup', onUp)\n  useEvent(target, 'touchstart', onDown)\n  useEvent(target, 'touchmove', onTouchMove)\n  useEvent(target, 'touchend', onTouchEnd)\n  useEvent(target, 'touchcancel', onTouchEnd)\n\n  React.useEffect(() => {\n    if (state.context.hoverStatus === 'enter') {\n      if (enterDelay) {\n        const timeout = setTimeout(\n          () => dispatch({type: 'activeStatus', value: 'active'}),\n          enterDelay\n        )\n        return () => clearTimeout(timeout)\n      }\n\n      dispatch({type: 'activeStatus', value: 'active'})\n    } else {\n      if (leaveDelay) {\n        const timeout = setTimeout(\n          () => dispatch({type: 'activeStatus', value: 'inactive'}),\n          leaveDelay\n        )\n        return () => clearTimeout(timeout)\n      }\n\n      dispatch({type: 'activeStatus', value: 'inactive'})\n    }\n  }, [state.context.hoverStatus, enterDelay, leaveDelay])\n\n  return state.context.activeStatus === 'active' ? state.mouse : initialState\n}\n\nconst initialState: MousePosition = {\n  x: null,\n  y: null,\n  pageX: null,\n  pageY: null,\n  clientX: null,\n  clientY: null,\n  screenX: null,\n  screenY: null,\n  elementWidth: null,\n  elementHeight: null,\n  isOver: false,\n  isDown: false,\n  isTouch: false,\n}\n\nconst initialContext: UseMouseState['context'] = {\n  hoverStatus: 'idle',\n  touchStatus: 'idle',\n  activeStatus: 'inactive',\n}\n\ninterface UseMouseState {\n  mouse: MousePosition\n  context: {\n    hoverStatus: 'idle' | 'enter' | 'leave'\n    touchStatus: 'idle' | 'start' | 'end'\n    activeStatus: 'inactive' | 'active'\n  }\n}\n\ntype UseMouseAction<T extends HTMLElement> =\n  | MousemoveAction<T>\n  | {\n      type: 'activeStatus'\n      value: UseMouseState['context']['activeStatus']\n    }\n  | {\n      type: 'mouseleave'\n    }\n  | {\n      type: 'touchleave'\n    }\n  | {\n      type: 'mouseup'\n    }\n  | TouchdownAction<T>\n  | MousedownAction<T>\n  | TouchmoveAction<T>\n\ntype TouchdownAction<T> = {\n  type: 'touchdown'\n  element: T\n  event: TouchEvent\n}\n\ntype MousedownAction<T> = {\n  type: 'mousedown'\n  element: T\n  event: MouseEvent\n}\n\ntype MousemoveAction<T> = {\n  type: 'mousemove'\n  element: T\n  event: MouseEvent | TouchEvent\n}\n\ntype TouchmoveAction<T> = {\n  type: 'touchmove'\n  element: T\n  event: MouseEvent | TouchEvent\n}\n\nexport interface UseMouseOptions {\n  enterDelay?: number\n  leaveDelay?: number\n  fps?: number\n}\n\nexport interface MousePosition {\n  x: number | null\n  y: number | null\n  pageX: number | null\n  pageY: number | null\n  clientX: number | null\n  clientY: number | null\n  screenX: number | null\n  screenY: number | null\n  elementWidth: number | null\n  elementHeight: number | null\n  isOver: boolean\n  isDown: boolean\n  isTouch: boolean\n}\n\nexport default useMouse\n"],"names":["useEvent","target","type","listener","cleanup","storedListener","React","storedCleanup","current","didUnsubscribe","args","apply","this","targetEl","addEventListener","removeEventListener","useThrottleCallback","callback","fps","leading","prev","clearTrailing","storedValue","storedCallback","ms","trailingTimeout","clearTimeout","deps","arguments","rightNow","now","call","setTimeout","state","action","window","e","event","element","touches","clientX","clientY","screenX","screenY","pageX","pageY","rect","getBoundingClientRect","x","left","pageXOffset","scrollX","y","top","pageYOffset","scrollY","width","height","context","hoverStatus","touchStatus","mouse","elementWidth","elementHeight","isOver","isTouch","handleDown","isDown","activeStatus","value","perf","performance","Date","initialState","initialContext","options","dispatch","enterDelay","leaveDelay","onMove","onTouchMove","onLeave","onDown","onUp","onTouchEnd","timeout"],"mappings":"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"}